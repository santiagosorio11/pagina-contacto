<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contacto Basico - Polaroids</title>
    <meta name="description" content="Polaroids de nuestros modelos en Contacto Básico. Descubre las fotos, medidas y detalles de nuestros talentos.">
    <meta name="keywords" content="polaroids, modelos, fotos de modelos, medidas de modelos, contacto basico">
    <meta property="og:title" content="Contacto Basico - Polaroids">
    <meta property="og:description" content="Polaroids de nuestros modelos en Contacto Básico. Descubre las fotos, medidas y detalles de nuestros talentos.">
    <meta property="og:image" content="https://www.contactobasico.com/assets/logo.png">
    <meta property="og:url" content="https://www.contactobasico.com/pages/polaroids.html">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Contacto Basico - Polaroids">
    <meta name="twitter:description" content="Polaroids de nuestros modelos en Contacto Básico. Descubre las fotos, medidas y detalles de nuestros talentos.">
    <meta name="twitter:image" content="https://www.contactobasico.com/assets/logo.png">
    <link rel="icon" href="../assets/logo.png" type="image/png">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/portfolio.css">
</head>
<body class="subpage" style="visibility: hidden;">
    <header class="main-header">
        <a href="/" class="logo-link">
            <img src="../assets/logo.png" alt="Básico Model Management Logo" class="logo" loading="lazy">
        </a>
        <button class="menu-toggle" aria-label="Toggle navigation menu">
            <span class="hamburger"></span>
        </button>
        <div class="nav-container">
            <nav class="main-nav">
                <button id="backButton" class="back-button" onclick="history.back()" style="font-family: 'Proxima Nova', sans-serif; font-size: .75rem; font-weight: normal; letter-spacing: .05em; color: var(--color-text); background: none; border: none; cursor: pointer; padding: .5rem 0; transition: all .3s ease-in-out; position: relative; text-transform: capitalize;">REGRESAR</button>
                <a href="../pages/women.html" data-translate="nav_women">Women</a>
                <a href="../pages/men.html" data-translate="nav_men">Men</a>
                <a href="../pages/about-us.html" data-translate="nav_about_us">About Us</a>
                <a href="../pages/events.html" data-translate="nav_events">Events</a>
                <a href="../pages/become-a-model.html" data-translate="nav_become_a_model">Become a Model</a>
                <a href="../pages/contact-us.html" data-translate="nav_contact_us">Contact Us</a>
            </nav>
            <div class="language-toggle">
                <button id="current-lang" class="active">
                    <span id="current-lang-text">EN</span>
                </button>
                <div class="language-dropdown" id="language-dropdown">
                    <button id="lang-en" data-lang="en">
                        <span>English</span>
                    </button>
                    <button id="lang-es" data-lang="es">
                        <span>Español</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main id="portfolio-main" class="portfolio-main">
        <img src="../assets/Long-logo.png" alt="Contacto Basico Logo" class="site-title-logo" style="position: relative; top: -30px;" loading="lazy">
        <h1 class="modelNameBook"></h1>
        <!-- Navigation tabs -->
        <div class="portfolio-tabs">
            <a href="portfolio.html?id=" class="portfolio-tab" id="portfolio-tab">Portfolio</a>
            <a href="polaroids.html?id=" class="portfolio-tab active" id="polaroids-tab">Polaroids</a>
            <a href="videos.html?id=" class="portfolio-tab" id="videos-tab">Videos</a>
        </div>
        <div class="carousel-container">
            <div class="carousel-images"></div>
            <button class="carousel-button prev"></button>
            <button class="carousel-button next"></button>
        </div>
        <div class="model-details-container">
            <ul class="modelBookMeasurements"></ul>
        </div>
    </main>

    <footer class="site-footer">
        <p>&copy; 2025 Contacto Basico. <span data-translate="copyright">All rights reserved.</span> Diseñado por <a href="https://synapseaiconsulting.co/" target="_blank" style="color: inherit; text-decoration: none;">Synapse AI Consulting</a></p>
   </footer>
    
    <script src="../js/translations.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/menu.js"></script>
    <script>
        // Override the loadPortfolioPage function to load polaroids instead
        document.addEventListener('DOMContentLoaded', async function() {
            // Add a small delay to ensure DOM is fully ready
            await new Promise(resolve => setTimeout(resolve, 100));
            
            // Get the page name correctly when pages are in a subdirectory
            const pathParts = window.location.pathname.split("/");
            const page = pathParts[pathParts.length - 1];
            console.log('Current page:', page);
            console.log('Full path:', window.location.pathname);

            if (page === 'polaroids.html') {
                console.log('Loading polaroids page');
                await loadPolaroidsPage();
            }

            // Make body visible after content is loaded
            document.body.style.visibility = 'visible';

            /* --- LOGICA PARA OCULTAR HEADER EN SCROLL --- */
            let lastScrollTop = 0;
            const header = document.querySelector('.main-header');

            window.addEventListener('scroll', function() {
                if (!header) return; // No ejecutar en páginas sin el header fijo (como la homepage)

                let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                if (scrollTop > lastScrollTop && scrollTop > header.offsetHeight) {
                    // Scroll hacia abajo
                    header.classList.add('header-hidden');
                } else {
                    // Scroll hacia arriba
                    header.classList.remove('header-hidden');
                }
                lastScrollTop = scrollTop <= 0 ? 0 : scrollTop; // For Mobile or negative scrolling
            });
        });

        // Function to load polaroids page
        async function loadPolaroidsPage() {
            console.log("loadPolaroidsPage function started");
            const mainContainer = document.getElementById('portfolio-main');
            if (!mainContainer) {
                console.error("Could not find the element with id 'portfolio-main'");
                // Make sure body is visible even if there's an error
                document.body.style.visibility = 'visible';
                return;
            }

            const params = new URLSearchParams(window.location.search);
            const modelId = params.get('id');
            console.log("Model ID from URL:", modelId);

            if (!modelId) {
                mainContainer.innerHTML = '<h1>Model not specified.</h1>';
                // Make sure body is visible
                document.body.style.visibility = 'visible';
                return;
            }

            try {
                console.log("Fetching models.json and translations.json...");
                const [data, translations] = await fetchData(['/json/models.json', '/json/translations.json']);
                console.log("Successfully parsed models.json and translations.json");

                const model = data.models.find(m => m.id === modelId);
                console.log("Found model:", model);

                if (!model) {
                    mainContainer.innerHTML = '<h1>Model not found.</h1>';
                    // Make sure body is visible
                    document.body.style.visibility = 'visible';
                    return;
                }

                document.title = `Contacto Basico - ${model.name} - Polaroids`;

                // Update tab links with model ID
                document.getElementById('portfolio-tab').href = `portfolio.html?id=${modelId}`;
                document.getElementById('polaroids-tab').href = `polaroids.html?id=${modelId}`;
                document.getElementById('videos-tab').href = `videos.html?id=${modelId}`;

                // Populate Model Name
                const modelNameElement = document.querySelector('.modelNameBook');
                if (modelNameElement) {
                    modelNameElement.textContent = model.name;
                }

                // Populate Model Measurements
                const measurementsList = document.querySelector('.modelBookMeasurements');
                if (measurementsList) {
                    measurementsList.innerHTML = ''; // Clear existing placeholders
                    const currentLang = localStorage.getItem('preferred_language') || detectLanguage();

                    for (const key in model.details) {
                        const value = model.details[key];
                        const measurementItem = document.createElement('div');
                        measurementItem.classList.add('measurement-item');

                        const nameSpan = document.createElement('span');
                        nameSpan.className = 'measurementName';
                        const translationKey = `detail_${key.toLowerCase()}`;
                        nameSpan.setAttribute('data-translation-key', translationKey);
                        const translatedLabel = translations[currentLang][translationKey] || key;
                        nameSpan.textContent = `${translatedLabel}: `;

                        const valueSpan = document.createElement('span');
                        valueSpan.className = 'measurements';

                        valueSpan.textContent = value;
                        measurementItem.classList.add('non-convertible');

                        measurementItem.appendChild(nameSpan);
                        measurementItem.appendChild(valueSpan);
                        measurementsList.appendChild(measurementItem);
                    }
                }

                // Custom Carousel Implementation with Slide Animation for Polaroids
                const carouselImagesContainer = document.querySelector('.carousel-images');
                const prevButton = document.querySelector('.carousel-button.prev');
                const nextButton = document.querySelector('.carousel-button.next');
                let currentImageIndex = 0;

                if (carouselImagesContainer && model.polaroids && model.polaroids.length > 0) {
                    carouselImagesContainer.innerHTML = ''; // Clear existing images

                    // Function to check if an image is horizontal
                    const isImageHorizontal = (imgUrl) => {
                        return new Promise((resolve) => {
                            const img = new Image();
                            img.onload = function() {
                                resolve(this.naturalWidth > this.naturalHeight);
                            };
                            img.onerror = function() {
                                // If there's an error loading the image, assume it's not horizontal
                                resolve(false);
                            };
                            img.src = imgUrl;
                        });
                    };

                    // Function to check if device is mobile
                    const isMobile = () => {
                        return window.innerWidth <= 768;
                    };

                    // Function to process images and create carousel
                    const processImagesAndCreateCarousel = async () => {
                        // Use polaroids instead of portfolioImages
                        const contentArray = model.polaroids;

                        // Separate horizontal images from regular images
                        const regularImages = [];
                        const horizontalImages = [];
                        
                        // Check all images concurrently
                        const imageChecks = contentArray.map(async (imgUrl, index) => {
                            const isHorizontal = await isImageHorizontal(imgUrl);
                            return { url: imgUrl, index, isHorizontal };
                        });
                        
                        const imageResults = await Promise.all(imageChecks);
                        
                        // Separate images based on their orientation
                        imageResults.forEach(imgData => {
                            if (imgData.isHorizontal) {
                                horizontalImages.push(imgData);
                            } else {
                                regularImages.push(imgData);
                            }
                        });
                        
                        // Create slide elements
                        const slideElements = [];
                        
                        if (isMobile()) {
                            // On mobile, show one image per slide
                            [...regularImages, ...horizontalImages].forEach((imgData, index) => {
                                const slideContainer = document.createElement('div');
                                slideContainer.classList.add('carousel-slide');
                                
                                const img = document.createElement('img');
                                img.src = imgData.url;
                                img.alt = `${model.name} ${imgData.index + 1}`;
                                slideContainer.appendChild(img);
                                
                                carouselImagesContainer.appendChild(slideContainer);
                                slideElements.push(slideContainer);
                            });
                        } else {
                            // On desktop, use the existing logic
                            // Process regular images: first image alone, others in pairs
                            for (let i = 0; i < regularImages.length; i++) {
                                let slideContainer = document.createElement('div');
                                slideContainer.classList.add('carousel-slide');
                                
                                if (i === 0) {
                                    // First image alone
                                    const img = document.createElement('img');
                                    img.src = regularImages[i].url;
                                    img.alt = `${model.name} ${regularImages[i].index + 1}`;
                                    slideContainer.appendChild(img);
                                } else {
                                    // Create pairs for remaining images
                                    slideContainer.classList.add('pair');
                                    
                                    const img1 = document.createElement('img');
                                    img1.src = regularImages[i].url;
                                    img1.alt = `${model.name} ${regularImages[i].index + 1}`;
                                    slideContainer.appendChild(img1);
                                    
                                    // Check if there's a second image for this pair
                                    if (i + 1 < regularImages.length) {
                                        const img2 = document.createElement('img');
                                        img2.src = regularImages[i + 1].url;
                                        img2.alt = `${model.name} ${regularImages[i + 1].index + 1}`;
                                        slideContainer.appendChild(img2);
                                        i++; // Skip next image as it's already processed
                                    }
                                }
                                
                                carouselImagesContainer.appendChild(slideContainer);
                                slideElements.push(slideContainer);
                            }
                            
                            // Process horizontal images (alone at the end)
                            horizontalImages.forEach((imgData, hIndex) => {
                                const slideContainer = document.createElement('div');
                                slideContainer.classList.add('carousel-slide');
                                
                                const img = document.createElement('img');
                                img.src = imgData.url;
                                img.alt = `${model.name} ${imgData.index + 1}`;
                                slideContainer.appendChild(img);
                                
                                carouselImagesContainer.appendChild(slideContainer);
                                slideElements.push(slideContainer);
                            });
                        }

                        const showSlide = (index) => {
                            // Position all slides
                            slideElements.forEach((slide, i) => {
                                slide.classList.remove('active', 'prev', 'next');
                                
                                if (i === index) {
                                    slide.classList.add('active');
                                } else if (i < index) {
                                    slide.classList.add('prev');
                                } else {
                                    slide.classList.add('next');
                                }
                            });
                            
                            // Update button states
                            if (index === 0) {
                                prevButton.disabled = true;
                                prevButton.style.opacity = '0.5';
                                prevButton.style.cursor = 'not-allowed';
                            } else {
                                prevButton.disabled = false;
                                prevButton.style.opacity = '1';
                                prevButton.style.cursor = 'pointer';
                            }
                            
                            // Always keep next button enabled for infinite looping
                            nextButton.disabled = false;
                            nextButton.style.opacity = '1';
                            nextButton.style.cursor = 'pointer';
                        };

                        const goToNextSlide = () => {
                            // Jump to first image when clicking next on the last image
                            if (currentImageIndex < slideElements.length - 1) {
                                currentImageIndex++;
                            } else {
                                currentImageIndex = 0; // Jump back to first image
                            }
                            showSlide(currentImageIndex);
                        };

                        const goToPrevSlide = () => {
                            // Non-infinite carousel - stop at the beginning
                            if (currentImageIndex > 0) {
                                currentImageIndex--;
                                showSlide(currentImageIndex);
                            }
                        };

                        prevButton.addEventListener('click', goToPrevSlide);
                        nextButton.addEventListener('click', goToNextSlide);

                        // Initialize carousel display
                        showSlide(currentImageIndex);
                    };

                    // Start processing images
                    processImagesAndCreateCarousel();

                    // Handle window resize to adjust carousel for mobile/desktop
                    let isMobileView = isMobile();
                    window.addEventListener('resize', () => {
                        const currentlyMobile = isMobile();
                        if (isMobileView !== currentlyMobile) {
                            isMobileView = currentlyMobile;
                            // Rebuild carousel when switching between mobile and desktop
                            carouselImagesContainer.innerHTML = '';
                            currentImageIndex = 0;
                            processImagesAndCreateCarousel();
                        }
                    });

                } else if (carouselImagesContainer) {
                    carouselImagesContainer.innerHTML = '<p>No polaroids available.</p>';
                }

                console.log("Polaroids page built successfully");

            } catch (error) {
                mainContainer.innerHTML = '<h1>Error loading polaroids. Please try again later.</h1>';
                console.error('Fetch error:', error);
            } finally {
                // Always make sure the body is visible
                document.body.style.visibility = 'visible';
            }
        }
    </script>
</body>
</html>